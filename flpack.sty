\ProvidesPackage{flpack}[TeX för fl]


\PassOptionsToPackage{export}{adjustbox}

\RequirePackage{standalone}

\RequirePackage[swedish]{babel}
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage{mathtools}
\RequirePackage{amsmath}[sumlimits, intlimits]
\RequirePackage{bm}
\RequirePackage{amsfonts}
\RequirePackage{physics}
\RequirePackage{titlesec}
\RequirePackage{mathtools}
\RequirePackage{amssymb}
\RequirePackage{titling}
\RequirePackage{esdiff}
\RequirePackage{bytefield}
\RequirePackage[binary-units=true, per-mode=symbol]{siunitx}
\RequirePackage{accents}
\RequirePackage{tikz}
\usetikzlibrary{calc}
\RequirePackage[parfill]{parskip}
\RequirePackage{changepage}
\RequirePackage{csquotes}
\RequirePackage{icomma}
\RequirePackage[export]{adjustbox}
\RequirePackage{booktabs}
\RequirePackage{enumerate}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{amsthm}
\RequirePackage[framemethod=tikz]{mdframed}
\RequirePackage{thmtools}

\theoremstyle{definition}
\newtheorem{defn}{Definition}
\newtheorem{ex}{Exempel}
\newtheorem{sats}{Sats}
\newtheorem{anm}{Anmärkning}
\newtheorem{påm}{Påminnelse}
\newtheorem{obs}{Observera}
\newtheorem{påst}{Påstående}
\newtheorem{ansats}{Ansats}

\mdfsetup{skipabove=\topskip,skipbelow=\topskip}

\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]
{defn}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{ex}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{sats}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{anm}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{påm}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{obs}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{påst}
\surroundwithmdframed[%
    backgroundcolor=gray!10,%
    innertopmargin=\topskip,%
]{ansats}

\DeclareMathOperator{\lap}{\mathcal{L}}

\newcommand{\faltningitid}{En faltning i tidsdomänen motsvarar en %
    multiplikation i frekvensdomänen.}

\newcommand{\io}{{i\omega}}
\newcommand{\iO}{{i\Omega}}

\newcommand{\ve}[1]{\accentset{\rightharpoonup}{#1}}

\newcommand{\fig}[1]{(Figur #1)}

\newcommand{\bs}{\displaystyle\sum}
\newcommand{\bi}{\displaystyle\int\limits}

\newcommand{\realn}{\mathbb{R}}
\newcommand{\intn}{\mathbb{Z}}
\newcommand{\compn}{\mathbb{C}}

\newcommand{\ji}{j}

\newcommand{\half}{\frac{1}{2}}
\newcommand{\inv}[1]{\frac{1}{#1}}

\newcommand{\inputfl}[1]{
    \section{Föreläsning #1}
    \setcounter{FigInsertC}{0}
    \input{fl/#1}
}

\newcounter{FigInsertC}

\newcommand{\niceIncludeGraphics}[1]{
    \includegraphics[max width=\textwidth]{#1}
}

\NewDocumentCommand{\f}{o}{
   
    \IfNoValueTF{#1}{
        \stepcounter{FigInsertC}
        \IfFileExists{fig/\fname-\theFigInsertC.png}{
        \niceIncludeGraphics{fig/\fname-\theFigInsertC}
    }{
        \IfFileExists{../fig/\fname-\theFigInsertC.png}{
            \niceIncludeGraphics{../fig/\fname-\theFigInsertC}
        }{
            Figur \theFigInsertC
        }
    }
    }{
        \IfFileExists{fig/\fname-#1.png}{
        \niceIncludeGraphics{fig/\fname-#1}
    }{
        \IfFileExists{../fig/\fname-#1.png}{
            \niceIncludeGraphics{../fig/\fname-#1}
        }{
            Figur \theFigInsertC
        }
    }
    }
}

\NewDocumentCommand \dquote {mm} {
    \pagebreak[2]
    \begin{center}
        \vspace{\baselineskip}
        
        \begin{adjustwidth}{0pt}{0pt}
            \textit{\enquote{#1}}\nopagebreak\par%
            \nopagebreak\flushright{-- #2}%
        \end{adjustwidth}
        
        \vspace{0.75\baselineskip}
    \end{center}
    \pagebreak[2]
}


% Ett litet makro för att typsätta schyssta citat.
\NewDocumentCommand\dquoteconv{mmmm}{
    \vspace{\baselineskip}
    
    \begin{center}
        \begin{tabular}{l p{5mm} r}
        \parbox[c]{0.3\textwidth}{
            \textit{\enquote{#1}}\\*
            \begin{flushright}-- #2\end{flushright}
        }
        &&
        \parbox[c]{0.3\textwidth}{
            \textit{\enquote{#3}}\\*
            \begin{flushright}-- #4\end{flushright}
        }
        \end{tabular}
    \end{center}
    
    \vspace{0.75\baselineskip}
}

\newcommand{\fquote}[1]{
    \dquote{#1}{Åke Fäldt}
}

\newcommand{\aquote}[1]{
    \dquote{#1}{Ants Silberberg}
}

\newcommand{\unitvector}[1]{
    \uvec{#1}
}

\newcommand{\bif}{
    \displaystyle\frac
}

\newcommand{\blim}{
    \displaystyle\lim
}

\newcommand{\lang}{
    \left\langle
}

\newcommand{\rang}{
    \right\rangle
}

\newcommand{\infint}{
    \bi_{-\infty}^{\infty}
}

\newcommand{\sqabs}[1]{
    \abs{#1}^2
}

\newcommand{\abssq}[1]{
    \abs{#1}^2
}

\newcommand{\oz}{
    \omega_0
}

% \newcommand{\uveci}{
%     {\bm{\hat{\textnormal{\bfseries\i}}}}
% }

\newcommand{\uvec}[1]{
    \hat{#1}
}

% \newcommand{\uvecj}{{\bm{\hat{\textnormal{\bfseries\j}}}}}
% \DeclareRobustCommand{\uvec}[1]{{%
%   \ifcat\relax\noexpand#1%
%     % it should be a Greek letter
%     \bm{\hat{#1}}%
%   \else
%     \ifcsname uvec#1\endcsname
%       \csname uvec#1\endcsname
%     \else
%       \bm{\hat{\mathbf{#1}}}%
%      \fi
%    \fi
% }}

\makeatletter
\newcommand*{\da@rightarrow}{\mathchar"0\hexnumber@\symAMSa 4B }
\newcommand*{\da@leftarrow}{\mathchar"0\hexnumber@\symAMSa 4C }
\newcommand*{\xdashrightarrow}[2][]{%
  \mathrel{%
    \mathpalette{\da@xarrow{#1}{#2}{}\da@rightarrow{\,}{}}{}%
  }%
}
\newcommand{\xdashleftarrow}[2][]{%
  \mathrel{%
    \mathpalette{\da@xarrow{#1}{#2}\da@leftarrow{}{}{\,}}{}%
  }%
}
\newcommand*{\da@xarrow}[7]{%
  % #1: below
  % #2: above
  % #3: arrow left
  % #4: arrow right
  % #5: space left 
  % #6: space right
  % #7: math style 
  \sbox0{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#1#6\m@th$}%
  \sbox2{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#2#6\m@th$}%
  \sbox4{$#7\dabar@\m@th$}%
  \dimen@=\wd0 %
  \ifdim\wd2 >\dimen@
    \dimen@=\wd2 %   
  \fi
  \count@=2 %
  \def\da@bars{\dabar@\dabar@}%
  \@whiledim\count@\wd4<\dimen@\do{%
    \advance\count@\@ne
    \expandafter\def\expandafter\da@bars\expandafter{%
      \da@bars
      \dabar@ 
    }%
  }%  
  \mathrel{#3}%
  \mathrel{%   
    \mathop{\da@bars}\limits
    \ifx\\#1\\%
    \else
      _{\copy0}%
    \fi
    \ifx\\#2\\%
    \else
      ^{\copy2}%
    \fi
  }%   
  \mathrel{#4}%
}
\makeatother

\endinput